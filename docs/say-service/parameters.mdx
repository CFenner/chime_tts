---
sidebar_position: 2
title: Parameters
---

import useBaseUrl from '@docusaurus/useBaseUrl';
import './chime_tts.say.css'

# `chime_tts.say` Parameters

The `chime_tts.say` service has [standard parameters](#standard-parameters) used by all TTS platforms, and [additional parameters](#additional-parameters) used by specific TTS platforms.

---

## Standard Parameters

### `message`

#### Basic Usage: Text

  The `message` parameter defines the text that will be converted into TTS audio by the TTS platform *(defined by the* [`tts_platform`](#tts_platform) *parameter)*.

  | **Description:** | The text to be converted into TTS audio. |
  | ---------------- | ---------------------------------------- |
  | **Required:**    | Yes                                      |
  | **Example:**     | `The washing's done!`                    |
  | **Default:**     | None                                     |

#### Advanced Usage: "Segment" sequences

The `message` parameter can also define a YAML sequence built from 3 different "segment" types: [`tts`](#tts-segment-type), [`chime`](#chime-segment-type) and [`delay`](#delay-segment-type). These segments can be used together to create any combination, for example:

![advanced_message_segments](https://github.com/nimroddolev/chime_tts/assets/1849295/574a0f4e-12e4-44ab-ae69-b8e3b46f5ce9)

```
service: chime_tts.say
target:
  entity_id: media_player.kitchen_speaker
data:
  chime_path: chord
  end_chime_path: tada
  offset: 0
  tts_platform: google_translate
  language: en
  message:
    - tts: Greetings friend!
      tts_platform: amazon_polly
    - chime: bells_2
    - tts: Hola amigo!
      language: es
      options:
        tld: es
      offset: 500
    - delay: 1000
    - tts: G'day mate!
      cache: true
      tts_speed: 115
      options:
        tld: com.au
```
<audio controls src={useBaseUrl('/audio/parameters/message_segments.mp3')} />

---

##### `tts` Segment Type

The tts segment type supports the parameters: ([`options`](#options), [`tts_platform`](#tts_platform), [`tts_speed`](#tts_speed), [`tts_pitch`](#tts_pitch), [`language`](#language), [`cache`](#cache)), [`offset`](#offset), and [`audio_conversion`](#audio_conversion) which allow you to use different TTS providers, languages, voices, rates of speech, pitch and apply specific FFmpeg audio conversions on different TTS segments within the same message.

Example usage:

```
service: chime_tts.say
target:
  entity_id: media_player.kitchen_speaker
data:
  chime_path: classical
  end_chime_path: marimba
  tts_platform: google_translate
  cache: false
  language: en
  message:
    - tts: May I please have your attention?
      cache: true
    - tts: It is officially time to move the washing to the dryer
      offset: 3000
      options:
        tld: co.uk
    - tts: VÃ¡monos!
      language: es
      options:
        tld: es
      tts_speed: 115
    - type: tts
      message: Let's go!
      tts_platform: amazon_polly
```
<audio controls src={useBaseUrl('/audio/parameters/tts_segments.mp3')} />

In the above example:
- The 1st segment overrides the cache parameter, setting it to true for the segment.
-  The 2nd segment adds a 3 second delay before the TTS message and overrides the domain, setting it to the UK.
- The 3rd segment overrides the language, setting it to Spanish with the domain accent of Spain, and sets the speech rate to 115%.
- The 4th segment overrides the TTS platform, setting it to Amazon Polly.

##### Overriding Parameters:
When a parameter is defined in a TTS segment, it overrides the corresponding "parent" parameter in the main set of parameters, if defined.
When including the `options` parameter in a TTS segment, the included parameters will overwrite any corresponding options in the main `options` parameter. Any parameters not overwritten in the "parent" `options` parameter will be applied as defined.

---

#### `chime` Segment Type

The chime segment allows you to insert chimes anywhere in your messages, *(not just at the start via* [`chime_path`](#chime_path)) *or end via* [`end_chime_path`](#end_chime_path)*)*, and supports the [`offset`](#offset) and [`audio_conversion`](#audio_conversion) parameters.

The chime path value can be set to a preset chime, a local path to your own custom files or a URL to a remote audio file (see [Selecting Chimes](./service#selecting-chimes)).

```
service: chime_tts.say
target:
  entity_id: media_player.kitchen_speaker
data:
  chime_path: toast
  end_chime_path: tada
  tts_platform: google_translate
  message:
    - tts: And the winner is, drumroll please
    - chime: drumroll
      offset: 500
    - tts: You!
      offset: 0
    - chime: /config/media/sounds/my_chimes/hooray.mp3
    - tts: You get to move the washing to the dryer!
```
<audio controls src={useBaseUrl('/audio/parameters/chime_segments.mp3')} />

---

#### `delay` Segment Type

The delay segment allows you to add additional delays into the message. This might be useful for repeating a message, *or pausing for dramatic effect* ðŸŽ­

```
service: chime_tts.say
target:
  entity_id: media_player.kitchen_speaker
data:
  tts_platform: google_translate
  message:
    - tts: Hey, do you hear that? Just listen.
    - delay: 1000
    - tts: Yep, sounds like clothes waiting to be moved to the dryer
```
<audio controls src={useBaseUrl('/audio/parameters/delay_segments.mp3')} />

---

### `tts_platform`

Chime TTS works with [TTS Platform integrations](https://www.home-assistant.io/integrations/#text-to-speech), but you need to add them to your Home Assistant instance yourself beforehand.

| **Description:**     | TTS platform to be used to create TTS audio. |
| -------------------- | -------------------------------------------- |
| **Required:**        | Yes                                          |
| **Example:**         | `amazon_polly`                               |
| **Default:**         | None                                         |
| **Possible Values:<sup>*</sup>** | `amazon_polly` (Amazon Polly)<br/>`baidu` (Baidu)<br/>`tts.eleven_labs_tts` (ElevenLabs TTS)<br/>`edge_tts` (Microsoft Edge TTS)<br/>`google_cloud` (Google Cloud)<br/>`google_translate` (Google Translate)<br/>`openai_tts` (OpenAI TTS)<br/>`watson_tts` (IBM Watson TTS)<br/>`marytts` (MaryTTS)<br/>`microsoft` (Microsoft Text-To-Speech)<br/>`cloud` (Nabu Casa Cloud TTS)<br/>`picotts` (Picto TTS)<br/>`tts.piper` (Piper)<br/>`voicerss` (VoiceRSS)<br/>`yandextts` (Yandex TTS) |

<sup>*</sup>To use a TTS platform not included in the list, simply set the custom TTS platform's service as the `tts_platform` parameter value.

---

### `chime_path`

| **Description:**     | The file path for the audio to insert **before** the TTS audio |
| -------------------- | -------------------------------------------------------------- |
| **Required:**        | No                                                             |
| **Example 1:**       | *One of the Chime TTS presets:*<br/>`ba_dum_tss`<br/>`bells`<br/>`bells_2`<br/>`bright`<br/>`chirp`<br/>`choir`<br/>`chord`<br/>`classical`<br/>`crickets`<br/>`ding_dong`<br/>`drumroll`<br/>`dun_dun_dun`<br/>`error`<br/>`fanfare`<br/>`glockenspiel`<br/>`hail`<br/>`knock`<br/>`marimba`<br/>`mario_coin`<br/>`microphone_tap`<br/>`tada`<br/>`toast`<br/>`twenty_four`<br/>`sad_trombone`<br/>`soft`<br/>`whistle` |
| **Example 2:**       | Your own audio file from your local media library:<br/>`/media/sounds/notification.mp3` |
| **Example 3:**       | Your own audio file from a URL:<br/>`https://www.some-website/sounds/notification.ogg` |
| **Default:**         | None                                                           |

---

### `end_chime_path`

| **Description:**     | The file path for the audio to insert **after** the TTS audio |
| -------------------- | -------------------------------------------------------------- |
| **Required:**        | No                                                             |
| **Example 1:**       | *One of the Chime TTS presets:*<br/>`ba_dum_tss`<br/>`bells`<br/>`bells_2`<br/>`bright`<br/>`chirp`<br/>`choir`<br/>`chord`<br/>`classical`<br/>`crickets`<br/>`ding_dong`<br/>`drumroll`<br/>`dun_dun_dun`<br/>`error`<br/>`fanfare`<br/>`glockenspiel`<br/>`hail`<br/>`knock`<br/>`marimba`<br/>`mario_coin`<br/>`microphone_tap`<br/>`tada`<br/>`toast`<br/>`twenty_four`<br/>`sad_trombone`<br/>`soft`<br/>`whistle` |
| **Example 2:**       | Your own audio file from your local media library:<br/>`/media/sounds/notification.mp3` |
| **Example 3:**       | Your own audio file from a URL:<br/>`https://www.some-website/sounds/notification.ogg` |
| **Default:**         | None                                                           |

---

### `offset`

| **Description:** | Adds a delay between audio segments when value > 0, or overlays audio segments when value < 0. |
| ---------------- | ---------------------------------------------------------------------------------------------- |
| **Required:**    | No                                                                                             |
| **Example 1:**   | `500` (Adds a 1 second delay between chimes & TTS audio)                                       |
| **Example 2:**   | `-500` (Moves the audio 1 second earlier, overlaying it with the previous chime/TTS audio)     |
| **Default:**     | `450`                                                                                          |

When using a value greater than 0, a delay is added between audio components:
![delay](https://github.com/nimroddolev/chime_tts/assets/1849295/9cc5a8c9-695f-4e7c-a2a8-fa6a8d17cb8f)

When using a negative value the audio components are overlaid:
![overlay](https://github.com/nimroddolev/chime_tts/assets/1849295/3daaef9b-5284-4398-ba04-8055c1352935)

---

### `final_delay`

| **Description:** | The delay (in milliseconds) to insert after the chimes and the TTS audio |
| ---------------- | ----------------------------------------------------------------------------- |
| **Required:**    | No                                                                            |
| **Example:**     | `200`                                                                         |
| **Default:**     | `0`                                                                           |

---

### `tts_speed`

| **Description:** | The speed for the TTS audio, between from 1% - 400% |
| ---------------- | ---------------------------------------------------------------|
| **Required:**    | No                                                             |
| **Example:**     | `150`                                                          |
| **Default:**     | `100`                                                          |

---

### `tts_pitch`

| **Description:** | The pitch of the TTS audio, in semitones (positive values to increase the pitch and negative values to lower it)|
| ---------------- | ---------------------------------------------------------------|
| **Required:**    | No                                                             |
| **Example:**     | `2`                                                          |
| **Default:**     | `0`                                                          |

---

### `volume_level`

| **Description:** | The volume level (between 0.0 - 1.0) to play the audio.<br/>The original volume is restored after playback. |
| ---------------- | -----------------------------------------------------------------------------------------------------------|
| **Required:**    | No                                                                                                         |
| **Example:**     | `0.75`                                                                                                     |
| **Default:**     | `1.0`                                                                                                      |

---

### `join_players`

| **Description:** | Play the audio simultaneously on multiple media_player entities (that support speaker groups). |
| ---------------- | -----------------------------------------------------------------------------------------------|
| **Required:**    | No                                                                                             |
| **Example:**     | `true`                                                                                         |
| **Default:**     | `false`                                                                                        |

---

### `unjoin_players`

| **Description:** | Unjoin the speakers after playback has completed. |
| ---------------- | --------------------------------------------------|
| **Required:**    | No                                                |
| **Example:**     | `true`                                            |
| **Default:**     | `false`                                           |

---

### `cache`

| **Description:** | Save generated audio to the cache for reuse in future service calls. |
| ---------------- | ---------------------------------------------------------------------|
| **Required:**    | No                                                                   |
| **Example:**     | `true`                                                               |
| **Default:**     | `false`                                                              |

---

### `audio_conversion`

| **Description:** | Convert the generated audio via FFmpeg to work with Alexa speakers, or convert with any FFmpeg arguments. |
| ---------------- | ----------------------------------------------------------------------------|
| **Required:**    | No                                                                          |
| **Example 1:**   | *Convert the audio to play correctly on Alexa media_players:*<br/>`Alexa`                                                                     |
| **Example 2:**   | *"Hard-code" the audio file's volume to be 200% of the original:*<br/> `Volume 200%`                                                                 |
| **Example 3:**   | *Any FFmpeg arguments, eg:*<br/>`-y -ac 2 -codec:a libmp3lame -b:a 48k -ar 24000 -write_xing 0` |
| **Default:**     | None                                                                        |

---

### `announce`
*The announce feature works natively for supported media_player platforms, and is simulated by Chime TTS for unsupported platforms (such as the Homepod).*

| **Description:** | Pauses any media currently playing on the media_player/s and resumes it after Chime TTS completes playback |
| ---------------- | ------------------------------------------------------------------------------|
| **Required:**    | No                                                                            |
| **Example:**     | `true`                                                                        |
| **Default:**     | `false`                                                                       |

---

### `options`

| **Description:** | YAML options field used by TTS services |
| ---------------- | ------------------------------------------------------------------------------|
| **Required:**    | No                                                                            |
| **Example:**     | `voice: Wendy` |
| **Default:**     | None                                                                       |

---

## Additional Parameters
The following parameters can be used with select TTS platforms, as outlined below:

---

### `language`

| **Description:** | The language to use for the TTS audio. This parameter is only supported by [Google Translate](https://www.home-assistant.io/integrations/google_translate/) and<br/>[Nabu Casa Cloud TTS](https://www.nabucasa.com/config/tts/). This parameter should also be used to set [IBM Watson TTS](https://www.home-assistant.io/integrations/watson_tts/)'s `voice` value. |
| ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Required:**    | No                                                                            |
| **Example:**     | `en`                                                                          |
| **Default:**     | None                                                                          |

---

### `tld`

| **Description:**     | The domain region to use for a specific dialect/accent. Refer to the documentation for [Google Translate](https://www.home-assistant.io/integrations/google_translate/) |
| -------------------- | ------------------------------------------------------------------------------|
| **Required:**        | No                                                                            |
| **Example:**         | `com.au`                                                                      |
| **Default:**         | None                                                                          |
| **Possible Values:** | `com`<br/>`co.uk`<br/>`com.au`<br/>`ca`<br/>`co.in`<br/>`ie`<br/>`co.za`<br/>`fr`<br/>`com.br`<br/>`pt`<br/>`es` |

---

### `gender`

| **Description:**     | Use a male or female voice [Nabu Casa Cloud TTS](https://www.nabucasa.com/config/tts/). |
| -------------------- | ----------------------------------------------------------------------------------------|
| **Required:**        | No                                                                                      |
| **Example:**         | `female`                                                                                |
| **Default:**         | None                                                                                    |
| **Possible Values:** | `male`<br/>`female`                                                                      |
